{"language":"Solidity","settings":{"libraries":{},"metadata":{"useLiteralContent":true},"optimizer":{"enabled":false,"runs":200},"remappings":[],"outputSelection":{"*":{"*":["*"],"":["*"]}}},"sources":{"Voting.sol":{"content":"pragma solidity >=0.4.24 <0.6.0;\r\n\r\ninterface IERC20 {\r\n    function balanceOf(address) external view returns (uint256);\r\n    function totalSupply() external view returns (uint256);\r\n}\r\n\r\ninterface IUniswapV2 {\r\n    function balanceOf(address) external view returns (uint256);\r\n    function totalSupply() external view returns (uint256);\r\n    function getReserves() external view returns (uint112, uint112, uint32);\r\n}\r\n\r\ninterface IGeyser {\r\n    function totalStakedFor(address) external view returns (uint256);\r\n    function token() external view returns (address);\r\n    function getDistributionToken() external view returns (address);\r\n}\r\n\r\ncontract Voting {\r\n    IERC20 public kMPLContract = IERC20(0xe8D17542dfe79Ff4FBd4b850f2d39DC69c4489a2);\r\n    IERC20 public AMPLContract = IERC20(0xD46bA6D942050d489DBd938a2C909A5d5039A161);\r\n  \r\n    IGeyser public zeusContract = IGeyser(0x0EAdf5c82b50E3D028E0eB10CF76676432A7AD51);\r\n    IGeyser public apolloContract = IGeyser(0x0Abfa8c10A4451Fef74Cf8DB2dEE33DDB048f79D);\r\n    \r\n    function getScore(address account) external view returns (uint256, uint256, uint256) {\r\n        uint256 totalKMPL = kMPLContract.balanceOf(account);\r\n        uint256 totalAMPL = AMPLContract.balanceOf(account);\r\n        \r\n        totalAMPL += getStaked(account, zeusContract);\r\n        totalKMPL += getStaked(account, apolloContract);\r\n        \r\n        return (totalKMPL + totalAMPL / 1000, totalKMPL, totalAMPL);\r\n    }\r\n    \r\n    function getStaked(address account, IGeyser geyser) public view returns (uint256) {\r\n        uint256 lp = geyser.totalStakedFor(account);\r\n        IUniswapV2 lpContract = IUniswapV2(geyser.token());\r\n        lp += lpContract.balanceOf(account);\r\n        \r\n        (,uint112 reserve,) = lpContract.getReserves();\r\n        return lp * reserve / lpContract.totalSupply();\r\n    }\r\n    \r\n}"}}}