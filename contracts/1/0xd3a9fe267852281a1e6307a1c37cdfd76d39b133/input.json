{"language":"Solidity","settings":{"libraries":{},"metadata":{"useLiteralContent":true},"optimizer":{"enabled":false,"runs":200},"remappings":[],"outputSelection":{"*":{"*":["*"],"":["*"]}}},"sources":{"browser/Polling.sol":{"content":"pragma solidity >=0.5.0;\n\ncontract PollingEvents {\n    event PollCreated(\n        address indexed creator,\n        uint256 blockCreated,\n        uint256 indexed pollId,\n        uint256 startDate,\n        uint256 endDate,\n        string multiHash,\n        string url\n    );\n\n    event PollWithdrawn(\n        address indexed creator,\n        uint256 blockWithdrawn,\n        uint256 pollId\n    );\n\n    event Voted(\n        address indexed voter,\n        uint256 indexed pollId,\n        uint256 indexed optionId\n    );\n}\n\ncontract PollingEmitter is PollingEvents {\n    uint256 public npoll;\n\n    function createPoll(uint256 startDate, uint256 endDate, string calldata multiHash, string calldata url)\n        external\n    {\n        uint256 startDate_ = startDate > now ? startDate : now;\n        require(endDate > startDate_, \"polling-invalid-poll-window\");\n        emit PollCreated(\n            msg.sender,\n            block.number,\n            npoll,\n            startDate_,\n            endDate,\n            multiHash,\n            url\n        );\n        require(npoll < uint(-1), \"polling-too-many-polls\");\n        npoll++;\n    }\n\n    function withdrawPoll(uint256 pollId)\n        external\n    {\n        emit PollWithdrawn(msg.sender, block.number, pollId);\n    }\n\n    function vote(uint256 pollId, uint256 optionId)\n        external\n    {\n        emit Voted(msg.sender, pollId, optionId);\n    }\n\n    function withdrawPoll(uint256[] calldata pollIds)\n        external\n    {\n        for (uint i = 0; i < pollIds.length; i++) {\n            emit PollWithdrawn(msg.sender, pollIds[i], block.number);\n        }\n    }\n\n    function vote(uint256[] calldata pollIds, uint256[] calldata optionIds)\n        external\n    {\n        require(pollIds.length == optionIds.length, \"non-matching-length\");\n        for (uint i = 0; i < pollIds.length; i++) {\n            emit Voted(msg.sender, pollIds[i], optionIds[i]);\n        }\n    }\n}"}}}